/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(e,t){typeof define=="function"&&define.amd?define(["jquery"],t):e.widgetjs=t(e.$)})(this,function(e){var t,n,r;return function(e){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v=t&&t.split("/"),m=l.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){v=v.slice(0,v.length-1),e=e.split("/"),o=e.length-1,l.nodeIdCompat&&d.test(e[o])&&(e[o]=e[o].replace(d,"")),e=v.concat(e);for(c=0;c<e.length;c+=1){p=e[c];if(p===".")e.splice(c,1),c-=1;else if(p===".."){if(c===1&&(e[2]===".."||e[0]===".."))break;c>0&&(e.splice(c-1,2),c-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(c=n.length;c>0;c-=1){r=n.slice(0,c).join("/");if(v)for(h=v.length;h>0;h-=1){i=m[v.slice(0,h).join("/")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&&g&&g[r]&&(a=g[r],f=c)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join("/"))}return e}function g(t,n){return function(){return s.apply(e,p.call(arguments,0).concat([t,n]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(t){if(v(f,t)){var n=f[t];delete f[t],c[t]=!0,i.apply(e,n)}if(!v(a,t)&&!v(c,t))throw new Error("No "+t);return a[t]}function E(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\.js$/;o=function(e,t){var n,r=E(e),i=r[0];return e=r[1],i&&(i=m(i,t),n=w(i)),i?n&&n.normalize?e=n.normalize(e,y(t)):e=m(e,t):(e=m(e,t),r=E(e),i=r[0],e=r[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:S(e)}}},i=function(t,n,r,i){var s,l,h,p,d,m=[],y=typeof r,E;i=i||t;if(y==="undefined"||y==="function"){n=!n.length&&r.length?["require","exports","module"]:n;for(d=0;d<n.length;d+=1){p=o(n[d],i),l=p.f;if(l==="require")m[d]=u.require(t);else if(l==="exports")m[d]=u.exports(t),E=!0;else if(l==="module")s=m[d]=u.module(t);else if(v(a,l)||v(f,l)||v(c,l))m[d]=w(l);else{if(!p.p)throw new Error(t+" missing "+l);p.p.load(p.n,g(i,!0),b(l),{}),m[d]=a[l]}}h=r?r.apply(a[t],m):undefined;if(t)if(s&&s.exports!==e&&s.exports!==a[t])a[t]=s.exports;else if(h!==e||!E)a[t]=h}else t&&(a[t]=r)},t=n=s=function(t,n,r,a,f){if(typeof t=="string")return u[t]?u[t](n):w(o(t,n).f);if(!t.splice){l=t,l.deps&&s(l.deps,l.callback);if(!n)return;n.splice?(t=n,n=r,r=null):t=e}return n=n||function(){},typeof r=="function"&&(r=a,a=f),a?i(e,t,n,r):setTimeout(function(){i(e,t,n,r)},4),s},s.config=function(e){return s(e)},t._defined=a,r=function(e,t,n){t.splice||(n=t,t=[]),!v(a,e)&&!v(f,e)&&(f[e]=[e,t,n])},r.amd={jQuery:!0}}(),r("htmlCanvas",["jquery"],function(e){function i(e){var n=s({element:e}),r={};return r.root=n,r.tag=function(e,t){var r=s({tag:e,children:t});return n.appendBrush(r),r},t.forEach(function(e){r[e]=function(){var t=Array.prototype.slice.call(arguments);return r.tag(e,t)}}),r.render=function(e){n.render(e)},r.raw=function(e){n.raw(e)},r.renderNonBreaking=function(e){r.raw(e.replace(/\s/g,"&nbsp;"))},r}function s(t){function u(e){return document.createElement(e)}function a(t){if(typeof t=="undefined"||t===null)throw new Error("cannot append null or undefined to brush");if(typeof t=="object"&&t.constructor===Array)for(var n=0;n<t.length;n++)a(t[n]);else typeof t=="string"?c(t):typeof t=="function"?h(t):typeof t=="object"&&t.appendToBrush?t.appendToBrush(s):typeof t=="object"?s.attr(t):e(o).append(t)}function f(e){o.canHaveChildren!==!1?o.appendChild(e):o.text=o.text+e.innerHTML}function l(e){f(e.element())}function c(t){e(o).append(document.createTextNode(t))}function h(e){var t=i(s);e(t)}function p(t){return typeof t=="undefined"||t===null?e(document.createDocumentFragment()).get(0):typeof t=="object"&&t.asJQuery?t.asJQuery().get(0):e(t).get(0)}var s={},o=t.tag?u(t.tag):p(t.element);if(!o)throw new Error("htmlTagBrush requires an element");return s.element=function(){return o},s.render=function(){var e=Array.prototype.slice.call(arguments);for(var t=0;t<e.length;t++)a(e[t]);return s},s.appendToBrush=function(e){e.appendBrush(s)},s.appendBrush=l,s.html=function(e){return s.asJQuery().html(e),s},s.raw=function(e){return s.asJQuery().append(e),s},s.renderNonBreaking=function(e){s.raw(e.replace(/\s/g,"&nbsp;"))},s.on=function(e,t){return s.asJQuery().bind(e,t),s},r.forEach(function(e){s[e]=function(t){return s.on(e,t)}}),s.setAttribute=function(e,t){return o.setAttribute(e,t),s},n.forEach(function(e){s[e]=function(t){return s.setAttribute(e,t)}}),s.css=function(e,t){return typeof e=="string"?s.asJQuery().css(e,t):s.asJQuery().css(e),s},s.attr=function(e){for(var t in e)e.hasOwnProperty(t)&&(typeof e[t]=="function"&&s.on(t,e[t]),t==="klass"?s.addClass(e[t]):s.setAttribute(t,e[t]));return s},s.addClass=function(e){return s.asJQuery().addClass(e),s},s.removeClass=function(e){return s.asJQuery().removeClass(e),s},s.asJQuery=function(){return e(s.element())},t.children&&a(t.children),s}var t="a abbr acronym address area article aside audio b bdi bdo big blockquote body br button canvas caption cite code col colgroup command datalist dd del details dfn div dl dt em embed fieldset figcaption figure footer form frame frameset h1 h2 h3 h4 h5 h6 hr head header hgroup html i iframe img input ins kbd keygen label legend li link map mark meta meter nav noscript object ol optgroup option output p param pre progress q rp rtruby samp script section select small source span strong style sub summarysup table tbody td textarea tfoot th thead time title tr track tt ul varvideo wbr".split(" "),n="href for id media rel src style title type".split(" "),r="blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error dragstart dragenter dragover dragleave drop dragend".split(" ");return i}),r("widget-extensions",[],function(){return{}}),r("router/url",[],function(){function t(e){var t={};e=e||"";var s=r(e),o=i(e),u=n(s);return t.getPath=function(){return s},t.getQuery=function(){return o},t.getSegments=function(){return u},t.matchRoute=function(e){return e.matchUrl(t)},t.toString=function(){return e},t}function n(t){return t.split(e).filter(Boolean)}function r(e){return e.replace(/\?.*$/g,"")}function i(e){var t=/[^?]*\?(.*)$/g.exec(e),n={},r;return t&&t.length>=2&&t[1].split("&").forEach(function(e){r=e.split("="),n[r[0]]=r[1]}),n}var e="/";return t.build=function(e,n){if(typeof e=="undefined"||e===null||typeof e!="string")throw"accepts only string paths";if(n){var r=decodeURIComponent(jQuery.param(n));if(r)return t(e+"?"+r)}return t(e)},t}),r("router/abstractSegment",[],function(){function e(e,t){e=e||{},t=t||{},t.segmentString=e.segmentString,t.options=e.options||{};var n={};return n.match=function(e){return!1},n.getValue=function(e){return t.segmentString},n.isParameter=function(){return!1},n.isOptional=function(){return!1},n.toString=function(){return t.segmentString},n}return e}),r("router/parameterSegment",["./abstractSegment"],function(e){function t(e){if(typeof e=="function")return e;if(e instanceof RegExp){var t=new RegExp(e);return function(e){return t.test(e)}}if(Object.prototype.toString.call(e)==="[object Array]"){var n=e.map(function(e){return e.toLowerCase()});return function(e){var t=e.toLowerCase();return n.indexOf(t)!==-1}}}function n(n,r){n=n||{},r=r||{};var i=e(n,r);return r.name=r.segmentString.substr(1),r.constraints=r.options.constraints&&r.options.constraints[r.name]&&[r.options.constraints[r.name]]||[],r.validators=r.constraints.map(t).filter(Boolean),i.getName=function(){return r.name},i.getValue=function(e){return e},i.isParameter=function(){return!0},i.match=function(e){return e!==undefined&&i.validate(e)},i.validate=function(e){return r.validators.every(function(t){return t(e)})},i.toString=function(){return"param("+i.getName()+")"},i}return n.match=function(e){return e.substr(0,1)==="#"},n}),r("router/optionalParameterSegment",["./parameterSegment"],function(e){function t(t,n){t=t||{},n=n||{};var r=e(t,n);return n.defaultValue=n.options.defaults&&n.options.defaults[n.name],r.getValue=function(e){return e===undefined?n.defaultValue:e},r.isOptional=function(){return!0},r.toString=function(){return"optional("+r.getName()+")"},r}return t.match=function(e){return e.substr(0,1)==="?"},t}),r("router/staticSegment",["./abstractSegment"],function(e){function t(t,n){t=t||{},n=n||{};var r=e(t,n);return r.match=function(e){return r.getValue()===e},r}return t.match=function(e){return!0},t}),r("router/routeFactory",["./parameterSegment","./optionalParameterSegment","./staticSegment"],function(e,t,n){function s(e,t){if(!e)return[];t=t||{};var n=e.split(r),i=n.map(Function.prototype.call,String.prototype.trim).filter(Boolean),s=i.map(function(e){return o(e,t)});return s}function o(e,t){t=t||{};for(var r=0;r<i.length;r++){var s=i[r];if(s.match(e))return s({segmentString:e,options:t})}return n({segmentString:e,options:t})}var r="/",i=[e,t];return s.addSegment=function(e){i.push(e)},s}),r("events",[],function(){var e=function(e,t){function s(e){var t=n({callback:e,event:r});return i.push(t),t}t=t||{};var r=function(e){return s(e)},i=[];return r.on=function(e){return s(e)},r.onceOn=function(e){var s=n({callback:function(){t.remove(s),e.apply(r,arguments)}});return i.push(s),s},r.off=function(e){t.remove(e)},r.trigger=function(){var e=Array.prototype.slice.call(arguments);i.forEach(function(t){t.execute(e)})},r.dispose=function(){i.slice().forEach(function(e){e.unbind()})},t.push=function(e){i.push(e),e.bind(r)},t.remove=function(e){i.splice(i.indexOf(e),1)},r},t=function(){function i(t){return s(t)||o(e(),t),n[t]}function s(e){return n[e]!==undefined}function o(e,t){return r.push(e),t&&(n[t]=e),e}var t={},n={},r=[];return t.createEvent=function(t){return o(e(),t)},t.on=function(e,t){return i(e).on(t)},t.off=function(e,t){return i(e).off(t)},t.onceOn=function(e,t){return i(e).onceOn(t)},t.trigger=function(e){var n=Array.prototype.slice.call(arguments,1),r=i(e);r.trigger.apply(t,n)},t.dispose=function(){r.forEach(function(e){e.dispose()}),n={},r=[]},t},n=function(e){e=e||{};var t={},n=e.callback,r=e.event;return t.isBound=function(){return r!==undefined},t.unbind=function(){t.isBound()&&(r.off(t),r=undefined)},t.bind=function(e){t.unbind(),e&&(r=e)},t.execute=function(e){n&&n.apply(t,e)},t},r=function(){var e={},n={};return e.register=function(e){if(n[e])throw"A event category is already registered for "+e;return n[e]=t(),n[e]},e.at=function(t){return n[t]||e.register(t),n[t]},e}();return r.eventCategory=t,r.eventhandler=t,r.event=e,r}),r("router/routeMatchResult",[],function(){function e(e){function u(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}e=e||{};var t=e.url,n=e.route,r=t&&t.getQuery&&t.getQuery()||{},i=e.values||{},s=u(i,r),o={};return o.getRoute=function(){return n},o.getUrl=function(){return t},o.isMatch=function(){return!0},o.getRouteParameters=function(){return i},o.getQueryParameters=function(){return t.getQuery()},o.getParameters=function(){return s},o.getActionArguments=function(){var e=Object.keys(i).map(function(e){return i[e]});return e.push(t.getQuery()),e},o}return e.routeNoMatchResult=function(){var t=e();return t.isMatch=function(){return!1},t}(),e}),r("router/route",["./routeFactory","../events","./routeMatchResult","jquery","./url"],function(e,t,n,r,s){function o(r,i){function c(e,t){return t=t||o,e.length!=t.length&&!a?!1:t.every(function(t,n){var r=e[n];return r!==undefined&&t.match(r)})}function h(e){var t=e.getSegments();if(c(t))return o;var n;for(n=0;n<f.length;n++)if(c(t,f[n]))return f[n];return null}function p(){var e=[];o.forEach(function(t,n){t.isOptional()&&e.push(n)});if(e.length>15)throw new Error('Too many optional arguments. "'+e.length+'"" optionals would generate  '+Math.pow(2,e.length)+" optional sequences.");var t=u(e);t.forEach(function(e){var t=o.slice();e.forEach(function(e,n){t.splice(e-n,1)}),f.push(t)})}function d(e,t){var r=t.getSegments(),i={};return o.forEach(function(t){if(!t.isParameter())return;var n=e.indexOf(t);n>=0?i[t.getName()]=t.getValue(r[n]):i[t.getName()]=t.getValue()}),n({route:l,url:t,values:i})}r=r||{},i=i||{};var o=e(r.pattern,r.options),a=r.options&&r.options.ignoreTrailingSegments||!1,f=[];p();var l={};return i.events=t.eventCategory(),l.onMatched=i.events.createEvent("matched"),l.on=i.events.on,l.matchUrl=function(e){var t=h(e);if(!t)return n.routeNoMatchResult;var r=d(t,e);return i.events.trigger("matched",r),r},l.expand=function(e){e=e||{};var t=[];o.forEach(function(n){var r;n.isParameter()?r=e[n.getName()]:r=n.getValue();if(r===undefined&&n.isOptional())return;if(!n.match(r))throw new Error("Could not generate a valid URL");t.push(r)});var n={};return Object.keys(e).forEach(function(t){l.hasParameter(t)||(n[t]=e[t])}),s.build(t.join("/"),n).toString()},l.hasParameter=function(e){return o.some(function(t){return t.isParameter()&&t.getName()===e})},l.toString=function(){return"route("+o.join("/")+")"},l}function u(e){var t=[],n,r,s=Math.pow(2,e.length);for(r=1;r<s;r++){n=[],i=e.length-1;do(r&1<<i)!==0&&n.unshift(e[i]);while(i--);t.unshift(n)}return t}return o}),r("router/hashLocation",["jquery","../events","./url"],function(e,t,n){function o(o,u){function h(){return window.location.hash}function p(e){window.location.hash=e}function d(e){return typeof e=="string"&&(e=n(e)),"#!/"+e.toString()}function v(e){return n(e.replace(/^#!?[\/]?/,""))}function m(){var t=e('<iframe id="ie_history_iframe" src="'+l+'" style="display: none"></iframe>').prependTo("body")[0];f=t.contentWindow.document||t.document,window.location.hash&&(f.location.hash=u.currentHash.substr(1)),f.location.title=window.title}function g(e){f.open(),f.close(),f.location.hash=e.substr(1)}function y(){return f.location.hash}function b(e){e=e||h(),u.currentHash!==e&&(u.currentHash=e,u.history.push(u.currentHash),s&&g(u.currentHash)),c.onChanged.trigger(v(u.currentHash))}function w(){var e=h();if(s){var t=y(),n=t!==u.currentHash&&t!==e;n&&(p(t),e=t)}var r=u.currentHash!==e;r&&b(e)}o=o||{},u=u||{};var a=null,f,l=o.iFrameSrc||"javascript:0";u.currentHash=undefined,u.history=[],u.events=t.eventCategory();var c={};return c.onChanged=u.events.createEvent("changed"),c.setUrl=function(e){var t=d(e);p(t),b(t)},c.getUrl=function(){return v(h())},c.linkToUrl=function(e){return d(e)},c.back=function(e){c.isHistoryEmpty()?e&&p(d(e)):(u.history.pop(),p(u.history.pop())),b()},c.isHistoryEmpty=function(){return u.history.length<=1},c.start=function(){c.stop(),u.currentHash=h(),u.history=[u.currentHash],r?(s&&m(),a=setInterval(w,i)):e(window).bind("hashchange",w)},c.stop=function(){a&&(clearInterval(a),a=null),e(window).unbind("hashchange",w),e("#ie_my.history_iframe").remove(),f=null},c}var r=!("onhashchange"in window),i=25,s=e.browser.msie&&parseInt(e.browser.version,10)<8;return o}),r("router/router",["jquery","../events","./route","./url","./hashLocation"],function(e,t,n,r,i){function o(e,i){function u(){var e=Array.prototype.slice.call(arguments),t={};return e.forEach(function(e){Object.keys(e).forEach(function(n){t[n]=e[n]})}),t}e=e||{},i=i||{};var o={};return i.location=e.locationHandler||s(),i.routeTable=[],i.lastMatch=undefined,i.defaultParameters={},i.location.onChanged(function(){i.resolveUrl()}),i.events=t.eventCategory(),o.onRouteMatched=i.events.createEvent("routeMatched"),o.onRouteNotFound=i.events.createEvent("routeNotFound"),o.onResolveUrl=i.events.createEvent("resolveUrl"),o.on=i.events.on,o.resolveUrl=function(e){typeof e=="string"&&(e=r(e)),i.resolveUrl(e)},o.addRoute=function(e){e=e||{};var t=n({pattern:e.pattern,options:e});return e.action&&t.onMatched(function(t){e.action.apply(this,t.getActionArguments())}),t.name=e.name,t.fallThrough=e.fallThrough,t.priority=e.priority,i.addRoute(t),t},o.findRoute=function(e){var t=i.routeTable.length;for(var n=0;n<t;n++){var r=i.routeTable[n];if(e(r))return r}return null},o.getRouteByName=function(e){return o.findRoute(function(t){return t.name&&t.name===e})},o.removeRoute=function(e){var t=i.routeTable.indexOf(e);if(t===-1)throw new Error("Route not in route table");i.routeTable.splice(t,1)},o.clear=function(){i.routeTable=[],i.lastMatch=undefined},o.pipeRoute=function(e,t){if(!e||!e.pattern)throw new Error("Route pattern required");var n=o.addRoute(e);return n.onMatched(function(e){t.resolveUrl(e.getUrl())}),n},o.pipeNotFound=function(e){return o.onRouteNotFound(function(t){e.resolveUrl(t)})},o.getUrl=function(){return i.location.getUrl()},o.linkTo=function(e,t,n){var r=o.getRouteByName(e);return r?i.location.linkToUrl(o.expand({routeName:r.name,parameters:t,excludeCurrentParameters:!n})):o.linkToPath(e,t)},o.linkToPath=function(e,t){return o.linkToUrl(r.build(e,t))},o.linkToUrl=function(e){return i.location.linkToUrl(e)},o.redirectTo=function(e,t,n){var r=o.getRouteByName(e);return r?i.location.setUrl(o.expand({routeName:r.name,parameters:t,excludeCurrentParameters:!n})):o.redirectToPath(e,t)},o.redirectToPath=function(e,t){return o.redirectToUrl(r.build(e,t))},o.redirectToUrl=function(e){return i.location.setUrl(e)},o.expand=function(e){var t=e.routeName,s=e.parameters||{},a=e.excludeCurrentParameters||!1,f;t?f=o.getRouteByName(t)||n():i.lastMatch?f=i.lastMatch.getRoute():f=n();var l=a?{}:o.getParameters(),c=u(l,s);Object.keys(i.defaultParameters).forEach(function(e){e in c||(c[e]=typeof i.defaultParameters[e]=="function"?i.defaultParameters[e]():i.defaultParameters[e])});var h=f.expand(c);return r(h)},o.linkToParameters=function(e,t){return i.location.linkToUrl(o.expand({parameters:e,excludeCurrentParameters:t}))},o.setParameters=function(e,t){o.redirectToUrl(o.expand({parameters:e,excludeCurrentParameters:t}))},o.getParameters=function(){return i.lastMatch?i.lastMatch.getParameters():i.location.getUrl().getQuery()},o.getParameter=function(e){var t=o.getParameters();return t[e]},o.setDefaultParameter=function(e,t){i.defaultParameters[e]=t},o.back=function(e){return i.location.back(e)},o.isHistoryEmpty=function(){return i.location.isHistoryEmpty()},o.start=function(){i.location.start(),i.resolveUrl()},o.stop=function(){i.location.stop()},i.resolveUrl=function(e){var t=e===undefined?i.location.getUrl():e;o.onResolveUrl.trigger(t);var n=0;i.routeTable.some(function(e){var r=t.matchRoute(e);if(r.isMatch()){i.lastMatch=r,n++,o.onRouteMatched.trigger(r);if(e.fallThrough===undefined||e.fallThrough===!1)return!0}}),n===0&&o.onRouteNotFound.trigger(t.toString())},i.addRoute=function(e){var t=i.routeTable.length;if(e.priority!==undefined){do--t;while(i.routeTable[t]&&(i.routeTable[t].priority===undefined||e.priority<i.routeTable[t].priority));t+=1}i.routeTable.splice(t,0,e)},o}var s=function(){return s.instance||(s.instance=i()),s.instance};return o}),r("router",["./router/url","./router/route","./router/router"],function(e,t,n){var r=n();return{url:e,route:t,router:n,getRouter:function(){return r},setRouter:function(e){r=e}}}),r("widget",["./widget-extensions","./router","./events","./htmlCanvas","jquery"],function(e,t,n,r,i){function a(e,t){var n=u.get();try{u.set(t),e()}finally{u.set(n)}}var s=function(s,f){function d(e){f.withChildrenRegistration(function(){l.renderOn(e)})}f=f||{},s=s||{};var l={},c=s.id||o.newId(),h=!1,p=[];f.events=n.eventCategory(),l.didAttach=f.events.createEvent(),l.getId=function(){return c},l.id=l.getId,l.dispose=function(){f.disposeWidget()},l.appendTo=function(e){d(r(e)),l.triggerDidAttach()},l.replace=function(e){var t=r(e);t.root.asJQuery().empty(),d(t),l.triggerDidAttach()},l.asJQuery=function(){return i("#"+l.getId())},l.isRendered=function(){return l.asJQuery().length>0},l.appendToBrush=function(e){d(r(e.asJQuery()))},l.triggerDidAttach=function(){l.didAttach.trigger(),p.forEach(function(e){e.triggerDidAttach()})},l.on=f.events.on,l.onceOn=f.events.onceOn,l.off=f.events.off,l.trigger=f.events.trigger,f.nextId=function(){return o.newId()},f.disposeWidget=function(){f.events.dispose()},f.trigger=f.events.trigger,f.router=t.getRouter(),f.linkTo=f.router.linkTo,f.linkToPath=f.router.linkToPath,f.linkToUrl=f.router.linkToUrl,f.redirectTo=f.router.redirectTo,f.redirectToPath=f.router.redirectToPath,f.redirectToUrl=f.router.redirectToUrl,f.getParameters=f.router.getParameters,f.getParameter=f.router.getParameter,f.setParameters=f.router.setParameters,l.renderOn=function(e){f.renderRootOn(e).render(l.renderContentOn)},f.withChildrenRegistration=function(e){var t=u.get();t&&t.registerChild(l),a(function(){p=[],e()},l)},l.registerChild=function(e){p.push(e)},f.renderRootOn=function(e){return e.tag("widgetjs-widget").id(c)},l.renderContentOn=function(e){},l.update=function(){if(h||!l.isRendered())return;var e=r();d(e),l.asJQuery().replaceWith(e.root.element),l.triggerDidAttach()},l.withUpdate=function(e){if(h)e();else try{h=!0,e()}finally{h=!1,l.update()}};for(var v in e)e.hasOwnProperty(v)&&(f[v]=e[v]);return l},o=function(){var e={},t=0;return e.newId=function(){return t+=1,t.toString()},e}(),u=function(){var e;return{get:function(){return e},set:function(t){e=t}}}();return s}),r("core",["./htmlCanvas","./widget","./widget-extensions","./router","./events"],function(e,t,n,r,i){return{htmlCanvas:e,widget:t,ext:n,router:r,events:i}}),r("jquery",function(){return e}),n("core")});